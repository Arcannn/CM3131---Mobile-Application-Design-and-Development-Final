<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My first app</title>
  <script type="module" src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.esm.js"></script>
  <script nomodule src="https://cdn.jsdelivr.net/npm/@ionic/core/dist/ionic/ionic.js"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@ionic/core/css/ionic.bundle.css" />
  <script src="exchange.js"></script>
  <style>
    :root {
      --ion-safe-area-top: 20px;
      --ion-safe-area-bottom: 22px;
    }

    header {
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.05em;
      margin-bottom: 1.25em;
      text-transform: uppercase;
    }

    section {
      margin-top: 1em;
      margin-bottom: 2.5em;
    }

    section:not(.full-width),
    .full-width>header {
      padding: 0 10px;
    }

    .avatar-center {
      margin: 0 auto;
    }
  </style>
</head>

<body>
  <ion-app>

    <ion-header translucent>
      <ion-toolbar>
        <ion-title>Currency Conversion</ion-title>
      </ion-toolbar>
      </ion-chip>
    </ion-header>

    <ion-content>
      <ion-fab horizontal="end" vertical="top" edge slot="fixed">
        <ion-fab-button>
          <ion-icon name="chevron-down-circle-outline"></ion-icon>
        </ion-fab-button>
        <ion-fab-list>
          <ion-fab-button color="light" href="Home.html">
            <ion-icon name="home"></ion-icon>
          </ion-fab-button>
          <ion-fab-button color="light" href="profileEdit.html">
            <ion-icon name="person-circle-outline"></ion-icon>
          </ion-fab-button>
          <ion-fab-button color="light" href="Cashflow.html">
            <ion-icon name="card-outline"></ion-icon>
          </ion-fab-button>
          <ion-fab-button color="primary" href="converter.html">
            <ion-icon name="logo-usd"></ion-icon>
          </ion-fab-button>
          <ion-fab-button color="light" href="chat.html">
            <ion-icon name="logo-wechat"></ion-icon>
          </ion-fab-button>
        </ion-fab-list>
      </ion-fab>

      <ion-content fullscreen class="ion-padding">
        <!-- navigation -->
        <ion-list inset="true">
          <ion-breadcrumbs>
            <ion-breadcrumb href="Home.html">
              <ion-icon slot="start" name="home"></ion-icon>
              Home
            </ion-breadcrumb>

            <ion-breadcrumbs>
              <ion-breadcrumb href="converter.html">
                <ion-icon slot="start" name="logo-usd">
                </ion-icon>
                Currency Converter
              </ion-breadcrumb>
        </ion-list>


        <!-- Currency converter -->
        <ion-card>
          <ion-card-header>

            <ion-card-title>Currency Converter</ion-card-title> <br><br>
            <ion-card-subtitle>please select the currency you wish to use.</ion-card-subtitle>
            <br>
            <ion-card-subtitle>Base currency is Euro.</ion-card-subtitle>
          </ion-card-header>
          <ion-card-content>

            <!-- Enter the amount: -->
            <input style="text-align:center;" type="number" id="amount" placeholder="Enter Amount Here">

            <br><br>
            <form>
              <div class="custom-select">
                <class="select" id="base" required></select>
              </div>

              <ion-select placeholder="Select Conversion Currency" class="selectCurrency" id="Currency">
                <ion-select-option value="select" selected disabled>Select Conversion Currency</ion-select-option>
                <ion-select-option input>EUR</ion-select-option>
                <ion-select-option input>USD</ion-select-option>
                <ion-select-option input>HKD</ion-select-option>
                <ion-select-option input>CAD</ion-select-option>
                <ion-select-option input>ISK</ion-select-option>
                <ion-select-option input>PHP</ion-select-option>
                <ion-select-option input>DKK</ion-select-option>
                <ion-select-option input>HUF</ion-select-option>
                <ion-select-option input>CZK</ion-select-option>
                <ion-select-option input>AUD</ion-select-option>
                <ion-select-option input>RON</ion-select-option>
                <ion-select-option input>SEK</ion-select-option>
                <ion-select-option input>IDR</ion-select-option>
                <ion-select-option input>BRL</ion-select-option>
                <ion-select-option input>RUB</ion-select-option>
                <ion-select-option input>HRK</ion-select-option>
                <ion-select-option input>JPY</ion-select-option>
                <ion-select-option input>THB</ion-select-option>
                <ion-select-option input>CHF</ion-select-option>
                <ion-select-option input>SGD</ion-select-option>
                <ion-select-option input>PLN</ion-select-option>
                <ion-select-option input>BGN</ion-select-option>
                <ion-select-option input>TRY</ion-select-option>
                <ion-select-option input>CNY</ion-select-option>
                <ion-select-option input>NOK</ion-select-option>
                <ion-select-option input>NZD</ion-select-option>
                <ion-select-option input>ZAR</ion-select-option>
                <ion-select-option input>MXN</ion-select-option>
                <ion-select-option input>ILS</ion-select-option>
                <ion-select-option input>KRW</ion-select-option>
                <ion-select-option input>MYR</ion-select-option>
                <ion-select-option input>GBP</ion-select-option>
              </ion-select>
            </form>
            <br>
            <!-- Above lists all the values for the exchange currency. Identified through the API as they hold the same values.-->

            <!-- Below is the ion-button that allows the amount to be converted using an onclick, script for the button found below. -->
            <ion-button expand="block" class="convert" type="button" value="Convert" onclick="currencyConvert()">Convert
            </ion-button>
          </ion-card-content>
        </ion-card>

        <!-- The second card on the page, showing the result and a reset button -->
        <ion-card>
          <ion-card-content>
            <input style="text-align:center;" id="Output" select disabled><br><br>
            <ion-button expand="block" type="reset" value="Reset Exchange">Reset Exchange</ion-button>
          </ion-card-content>
        </ion-card>


        <!-- Simple script for the API input and output. Base currency x currency selected = output.  -->
        <script>

          async function currencyConvert() {
            var valNum = document.getElementById("amount").value;
            if (valNum <= 0) {
              window.alert("Please Enter a value greater than 0");
            }

            else {
              var base = document.getElementById("base").value;
              var currencyValue = document.getElementById("Currency").value;
              if (currencyValue == "select") {
                window.alert("Please pick a conversion currency!");
              }

              else {
                var rates = await getDataByBase(base);
                document.getElementById("Output").value = (valNum * rates[currencyValue]).toFixed(2);
              }

            }
          }
        </script>


      </ion-content>

  </ion-app>
</body>

</html>